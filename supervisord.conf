; Supervisor config file for dowse.
;
; For more information on the config file, please see:
; http://supervisord.org/configuration.html
;
; Notes:
;  - Shell expansion ("~" or "$HOME") is not supported.  Environment
;    variables can be expanded using this syntax: "%(ENV_HOME)s".
;  - Quotes around values are not supported, except in the case of
;    the environment= options as shown below.
;  - Comments must have a leading space: "a=b ;comment" not "a=b;comment".
;  - Command will be truncated if it looks like a config file comment, e.g.
;    "command=bash -c 'foo ; bar'" will truncate to "command=bash -c 'foo ".

[unix_http_server]
file=/tmp/dowse.sock   ; the path to the socket file
chown=dowse:dowse           ; socket file uid:gid owner

[supervisord]
;logfile=/tmp/supervisord.log ; main log file; default $CWD/supervisord.log
logfile_maxbytes=50MB        ; max main logfile bytes b4 rotation; default 50MB
logfile_backups=10           ; # of main logfile backups; 0 means none, default 10
loglevel=warn                ; log level; default info; others: debug,warn,trace
pidfile=/tmp/dowse_supervisord.pid ; supervisord pidfile; default supervisord.pid
nodaemon=false               ; start in foreground if true; default false
minfds=1024                  ; min. avail startup file descriptors; default 1024
minprocs=200                 ; min. avail process descriptors;default 200
user=dowse            ; setuid to this UNIX account at startup; recommended if root

; The rpcinterface:supervisor section must remain in the config file for
; RPC (supervisorctl/web interface) to work.  Additional interfaces may be
; added by defining them in separate [rpcinterface:x] sections.

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix:///tmp/dowse.sock ; use a unix:// URL  for a unix socket
prompt=dowse         ; cmd line prompt (default "supervisor")

[program:dhcpd]
command=/opt/dowse/daemons/dhcpd
priority=100
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/dowse/dhcpd.log

[program:dnscrypt-proxy]
command=/opt/dowse/daemons/dnscrypt-proxy
priority=100
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/dowse/dnscrypt-proxy.log

[program:mosquitto]
command=/opt/dowse/daemons/mosquitto
priority=100
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/dowse/mosquitto.log

[program:dowse-to-mosquitto]
command=/opt/dowse/daemons/dowse-to-mosquitto
; dowse-to-mosquitto needs to start after mosquitto
priority=110
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/dowse/dowse-to-mosquitto.log

[program:mysqld]
command=/opt/dowse/daemons/mysqld
priority=100
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/dowse/mysqld.log

[program:netdata]
command=/opt/dowse/daemons/netdata
priority=100
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/dowse/netdata.log

[program:node-red]
command=/opt/dowse/daemons/node-red
priority=100
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/dowse/node-red.log

[program:pglcmd]
command=/opt/dowse/daemons/pglcmd
priority=110
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/dowse/pglcmd.log

[program:redis]
command=/opt/dowse/daemons/redis
priority=100
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/dowse/redis.log

[program:redis-volatile]
command=/opt/dowse/daemons/redis-volatile
priority=110
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/dowse/redis-volatile.log

[program:webui2]
command=/opt/dowse/daemons/webui2
priority=120
autorestart=true
redirect_stderr=true
stdout_logfile=/var/log/dowse/webui2.log

